{
  // Cloudflare Wrangler configuration for NexusRank AI Tools Worker
  // Compatible with Cloudflare Workers Free Plan

  "name": "nexusrank-ai-worker",
  "main": "worker.js",
  "compatibility_date": "2025-08-26",

  // Build configuration
  "build": {
    "command": "",  // No build step (pure JS)
    "cwd": "./backend",
    "watch_dir": "./backend"
  },

  // No D1, R2, KV, Queues, or AI bindings (not available on Free Plan)
  
  // Routes (optional - set in dashboard instead)
  // Free Plan allows 1 route; set in Cloudflare Dashboard
  // "routes": [
  //   {
  //     "pattern": "*/ai/*",
  //     "zone_name": "your-domain.com"
  //   }
  // ],

  // Environment variables (non-secret)
  "vars": {
    "ENVIRONMENT": "production",
    "VERSION": "1.0.0",
    "MAX_TEXT_LENGTH": 5000,
    "RATE_LIMIT_REQUESTS": 100,
    "RATE_LIMIT_WINDOW": 900
  },

  // Secrets like DEEPSEEK_API_KEY are added via Cloudflare Dashboard
  // Do NOT include here — add in Worker Settings → Variables and Secrets
  // Use: "DEEPSEEK_API_KEY" as encrypted secret

  // Development settings
  "dev": {
    "ip": "0.0.0.0",
    "port": 8787,
    "local_protocol": "http",
    "upstream_protocol": "https"
  },

  // Miniflare for local testing (optional)
  "miniflare": {
    "live_reload": true,
    "update_check": true
  },

  // Node.js compatibility (disabled — not needed)
  "node_compat": false,

  // CPU limit: Free Plan allows up to 10ms CPU time per request
  // But DeepSeek calls may exceed this — use on Paid Plan for full functionality
  // For Free Plan, consider lightweight proxy logic only
  "limits": {
    "cpu_ms": 10  // Free Plan limit (soft)
  },

  // Upload rules
  "rules": [
    {
      "type": "ESModule",
      "globs": ["**/*.js"]
    },
    {
      "type": "Text",
      "globs": ["**/*.txt", "**/*.md", "**/*.json"]
    }
  ],

  // Exclude unnecessary files from upload
  "upload": {
    "exclude": [
      "*.log",
      "*.test.js",
      "node_modules/",
      ".git/",
      "README.md",
      "package*.json",
      "tests/",
      "dev/"
    ]
  },

  // No unsafe bindings
  "unsafe": {
    "bindings": [],
    "metadata": {}
  },

  // No services, durable objects, analytics, etc. (Free Plan doesn't support)
  
  //
